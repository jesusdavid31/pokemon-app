import{r as c,j as e,u as D,a as S}from"./index-CmSnU3cG.js";import{S as R,A as _}from"./sweetalert2.esm.all-CLTH8uwg.js";const F=({label:o,value:n,color:t="#66ccff"})=>{const[r,m]=c.useState("0%");return c.useEffect(()=>{const l=setTimeout(()=>{m(`${n}%`)},100);return()=>clearTimeout(l)},[n]),e.jsxs("div",{className:"stat",children:[e.jsxs("div",{className:"stat-label",children:[e.jsx("strong",{children:o.toUpperCase()}),e.jsx("span",{children:n})]}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:r,backgroundColor:t}})})]})},P={grass:"#66cc66",fire:"#ff9933",water:"#66ccff",bug:"#99cc33",poison:"#8a2be2",flying:"#99ccff",electric:"#ffcc33",psychic:"#ff66cc",rock:"#b8a038",ground:"#e0c068",fairy:"#ee99ac",ice:"#66ffff",dragon:"#7038f8",dark:"#705848",ghost:"#705898",fighting:"#c03028",steel:"#b8b8d0",normal:"#a8a878"},T=()=>{const{name:o}=D(),n=S(),[t,r]=c.useState(!0),[m,l]=c.useState(null),[p,s]=c.useState([]);return{name:o,loading:t,pokemon:m,evolutions:p,getPokemon:async()=>{var g,j,x;try{r(!0);const d=await fetch(`https://pokeapi.co/api/v2/pokemon/${o}`);if(!d.ok)throw new Error("Error fetching Pokémon");const i=await d.json(),h=i.types.map(a=>a.type.name),C=h[0];let u=P[C]||"#ccc";u==="#a8a878"&&h.length>1&&(u=P[h[1]]),l({id:`#${i.id.toString().padStart(3,"0")}`,name:i.name.charAt(0).toUpperCase()+i.name.slice(1),img:(x=(j=(g=i.sprites)==null?void 0:g.other)==null?void 0:j["official-artwork"])==null?void 0:x.front_default,weight:`${(i.weight/10).toFixed(1)} kg`,height:`${(i.height/10).toFixed(1)} m`,types:h,color:u,stats:i.stats.map(a=>({name:a.stat.name,value:a.base_stat})),abilities:i.abilities.map(a=>a.ability.name)});const L=await(await fetch(i.species.url)).json(),$=await(await fetch(L.evolution_chain.url)).json(),k=[],v=a=>{a&&(k.push(a.species.name),a.evolves_to.forEach(b=>v(b)))};v($.chain);const A=await Promise.all(k.map(async a=>{var N,w,E;const y=await(await fetch(`https://pokeapi.co/api/v2/pokemon/${a}`)).json();return{name:y.name,img:(E=(w=(N=y.sprites)==null?void 0:N.other)==null?void 0:w["official-artwork"])==null?void 0:E.front_default}}));s(A)}catch(d){console.error("Error fetching Pokémon details:",d),R.fire("Error","Error fetching Pokémon details","error"),n("/")}finally{r(!1)}}}},W=()=>{const{name:o,loading:n,pokemon:t,getPokemon:r,evolutions:m}=T(),l=S(),p=s=>s.split("-").map(f=>f.charAt(0).toUpperCase()+f.slice(1)).join(" ");return c.useEffect(()=>{r()},[o]),c.useEffect(()=>{console.log(`Loading details for Pokémon: ${o}`)},[o]),e.jsx(e.Fragment,{children:n?e.jsx("div",{className:"pokemon-detail",children:e.jsx("div",{className:"spinner",children:e.jsx("div",{className:"spinnerin"})})}):e.jsx(e.Fragment,{children:t&&e.jsxs("div",{className:"pokemon-detail",style:{background:`linear-gradient(145deg, ${t.color},rgb(54, 54, 54))`},children:[e.jsx("button",{className:"animated-button",onClick:()=>l("/home-page"),children:e.jsx(_,{text:"Back",icon:e.jsx("path",{d:"M7.8284 11H20V13H7.8284L13.1924 18.364L11.7782 19.7782L4 12L11.7782 4.22183L13.1924 5.63604L7.8284 11Z"})})}),e.jsxs("div",{className:"card",children:[e.jsx("img",{src:t.img,alt:t.name,className:"pokemon-img"}),e.jsx("h1",{children:t.name}),e.jsxs("span",{className:"card-id",children:["ID: ",t.id]}),e.jsxs("p",{children:["Height: ",t.height]}),e.jsxs("p",{children:["Weight: ",t.weight]}),e.jsxs("p",{children:["Types: ",t.types.join(" / ")]}),e.jsxs("div",{className:"stats",children:[e.jsx("h2",{children:"Stats"}),t.stats.map(s=>e.jsx("div",{className:"stat-item",children:e.jsx(F,{label:s.name,value:s.value,color:t.color})},s.name))]}),e.jsxs("div",{className:"abilities",children:[e.jsx("h2",{children:"Abilities"}),e.jsx("ul",{children:t.abilities.map(s=>e.jsx("li",{children:p(s)},s))})]}),e.jsxs("div",{className:"evolutions",children:[e.jsx("h2",{children:"Evolution Chain"}),e.jsx("div",{className:"evolution-chain",children:m.map(s=>e.jsxs("div",{className:"evo-card",onClick:()=>l(`/pokemon/${s.name}`),children:[e.jsx("img",{src:s.img,alt:s.name}),e.jsx("p",{children:s.name.charAt(0).toUpperCase()+s.name.slice(1)})]},s.name))})]})]})]})})})};export{W as default};
