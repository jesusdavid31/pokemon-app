import{j as e,L as E,r as j,R as P}from"./index-CmSnU3cG.js";import{A as D,S as I}from"./sweetalert2.esm.all-CLTH8uwg.js";const N=({pokemon:s})=>e.jsxs("div",{className:`card ${s.color}`,children:[e.jsx("span",{className:"card-id",children:s.id}),e.jsx("div",{className:"circle-bg",children:e.jsx("img",{src:s.img,alt:s.name})}),e.jsx("h2",{children:s.name}),e.jsxs("p",{children:["Weight: ",s.weight]}),e.jsxs("p",{children:["Height: ",s.height]}),e.jsxs("p",{className:"type",children:["Type: ",e.jsx("span",{children:s.type})]}),e.jsx(E,{to:`/pokemon/${s.name}`,className:"animated-button",children:e.jsx(D,{text:"View Details",icon:e.jsx("path",{d:"M16.1716 10.9999L10.8076 5.63589L12.2218 4.22168L20 11.9999L12.2218 19.778L10.8076 18.3638L16.1716 12.9999H4V10.9999H16.1716Z"})})})]}),T=({onDelete:s})=>e.jsx("button",{className:"delete-search-button",onClick:()=>s(),children:"Delete Search"}),w=[4,7,1,25,39,133,150,94,143,6],_=["142, 249, 252","142, 252, 204","142, 252, 157","215, 252, 142","252, 252, 142","252, 208, 142","252, 142, 142","252, 142, 239","204, 142, 252","142, 202, 252"],A=()=>e.jsx("div",{className:"pokemon-carousel-wrapper",children:e.jsx("div",{className:"pokemon-carousel-inner",style:{"--quantity":w.length},children:w.map((s,t)=>e.jsx("div",{className:"pokemon-carousel-card",style:{"--index":t,"--color-card":_[t]},children:e.jsx("div",{className:"pokemon-carousel-img",children:e.jsx("img",{src:`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/${s}.png`,alt:`pokemon-${s}`})})},s))})}),L={grass:"grass",fire:"fire",water:"water",bug:"bug",poison:"poison",flying:"flying",electric:"electric",psychic:"psychic",rock:"rock",ground:"ground",fairy:"fairy",ice:"ice",dragon:"dragon",dark:"dark",ghost:"ghost",fighting:"fighting",steel:"steel",normal:"normal"},V=()=>{const[s,t]=j.useState(!0),[n,h]=j.useState([]);return{loading:s,pokemons:n,getPokemons:async p=>{if(p<1){console.warn("Ya estás en la primera página.");return}const u=10,g=(p-1)*u;try{t(!0);const r=await(await fetch(`https://pokeapi.co/api/v2/pokemon?limit=${u}&offset=${g}`)).json(),i=await Promise.all(r.results.map(async o=>{const a=await(await fetch(o.url)).json(),f=a.types.map(y=>y.type.name),d=f[0];let k=L[d]||"normal";return k==="normal"&&f.length>1&&(k=f[1]),{id:`#${a.id.toString().padStart(3,"0")}`,name:a.name.charAt(0).toUpperCase()+a.name.slice(1),img:a.sprites.front_default,weight:`${(a.weight/10).toFixed(1)} kg`,height:`${(a.height/10).toFixed(1)} m`,type:f.join(" / "),color:k}}));h(i),t(!1)}catch(l){I.fire("Error",l,"error")}}}},B=()=>{const[s,t]=j.useState(null),[n,h]=j.useState(!1),[x,p]=j.useState(!1);return{searchPokemon:async g=>{var l,r,i;if(p(!0),g.length<3){t(null);return}try{h(!0);const o=await fetch(`https://pokeapi.co/api/v2/pokemon/${g.toLowerCase()}`);if(!o.ok){t(null);return}const c=await o.json(),a=c.types.map(k=>k.type.name),f=a[0];let d=L[f]||"normal";d==="normal"&&a.length>1&&(d=a[1]),t({id:`#${c.id.toString().padStart(3,"0")}`,name:c.name.charAt(0).toUpperCase()+c.name.slice(1),img:(i=(r=(l=c.sprites)==null?void 0:l.other)==null?void 0:r["official-artwork"])==null?void 0:i.front_default,weight:`${(c.weight/10).toFixed(1)} kg`,height:`${(c.height/10).toFixed(1)} m`,type:a.join(" / "),color:d})}catch(o){t(null),console.error("Error fetching Pokémon:",o)}finally{h(!1)}},searchedPokemon:s,setSearchedPokemon:t,lookingForPokemon:x,setLookingForPokemon:p,searching:n,setSearching:h}},v=s=>{let t;const n=new Set,h=(r,i)=>{const o=typeof r=="function"?r(t):r;if(!Object.is(o,t)){const c=t;t=i??(typeof o!="object"||o===null)?o:Object.assign({},t,o),n.forEach(a=>a(t,c))}},x=()=>t,g={setState:h,getState:x,getInitialState:()=>l,subscribe:r=>(n.add(r),()=>n.delete(r))},l=t=s(h,x,g);return g},H=s=>s?v(s):v,M=s=>s;function R(s,t=M){const n=P.useSyncExternalStore(s.subscribe,()=>t(s.getState()),()=>t(s.getInitialState()));return P.useDebugValue(n),n}const b=s=>{const t=H(s),n=h=>R(t,h);return Object.assign(n,t),n},O=s=>s?b(s):b,W=O(s=>({page:1,setPage:t=>s({page:t})})),q=()=>{const{loading:s,pokemons:t,getPokemons:n}=V(),{searching:h,setSearching:x,searchPokemon:p,searchedPokemon:u,setSearchedPokemon:g,lookingForPokemon:l,setLookingForPokemon:r}=B(),{page:i,setPage:o}=W(),[c,a]=j.useState(""),[f,d]=j.useState(!1),k=m=>{a(m.target.value),m.target.value.length>=3?d(!1):d(!0),m.target.value.length===0&&(g(null),r(!1),x(!1),d(!1))},y=m=>{if(m.key==="Enter"){const S=c.trim().toLowerCase();S.length>=3&&p(S)}},C=()=>{g(null),r(!1),x(!1),a(""),d(!1)},$=()=>{i>1&&o(i-1)},F=()=>{o(i+1)};return j.useEffect(()=>{n(i)},[i]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"home-page-container",children:s?e.jsx("div",{className:"spinner",children:e.jsx("div",{className:"spinnerin"})}):e.jsxs("div",{className:"pokemon-card-container",children:[e.jsxs("div",{className:"title-container",children:[e.jsx("div",{className:"pokeball"}),e.jsxs("h1",{className:"title",children:["Pokémon ",e.jsx("span",{className:"subtitle",children:"Pokedex"})]})]}),e.jsxs("div",{className:"search-and-delete-container",children:[e.jsxs("div",{className:"search-container",children:[e.jsx("input",{name:"input-search",className:"input",type:"text",value:c,onChange:k,onKeyDown:y,placeholder:"Type the name of a Pokémon..."}),e.jsx("svg",{viewBox:"0 0 24 24",className:"search__icon",style:{cursor:"pointer"},onClick:()=>{const m=c.trim().toLowerCase();m.length>=3?(d(!1),p(m)):d(!0)},children:e.jsx("g",{children:e.jsx("path",{d:"M21.53 20.47l-3.66-3.66C19.195 15.24 20 13.214 20 11c0-4.97-4.03-9-9-9s-9 4.03-9 9 4.03 9 9 9c2.215 0 4.24-.804 5.808-2.13l3.66 3.66c.147.146.34.22.53.22s.385-.073.53-.22c.295-.293.295-.767.002-1.06zM3.5 11c0-4.135 3.365-7.5 7.5-7.5s7.5 3.365 7.5 7.5-3.365 7.5-7.5 7.5-7.5-3.365-7.5-7.5z"})})})]}),e.jsx("div",{className:"delete-button-container",children:e.jsx(T,{onDelete:()=>C()})})]}),f&&e.jsx("div",{style:{width:"auto",display:"flex"},children:e.jsx("p",{className:"error-text",children:"Please enter at least 3 characters to search for a Pokémon."})}),h?e.jsx("div",{className:"spinner",style:{top:"70%"},children:e.jsx("div",{className:"spinnerin"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`card-grid ${l?"single-column":""}`,children:e.jsxs(e.Fragment,{children:[!l&&!u&&e.jsx(e.Fragment,{children:t.map(m=>e.jsx(N,{pokemon:m},m.id))}),l&&u&&e.jsx(N,{pokemon:u},u.id)]})}),l&&!u&&e.jsxs("div",{className:"without-results",style:{minWidth:"400px",width:"100%",height:"auto"},children:[e.jsxs("div",{className:"without-results__title",children:[e.jsx("h2",{children:"Pokémon not found"}),e.jsx("p",{children:"Please try searching for another Pokémon."})]}),e.jsx(A,{})]})]}),!l&&e.jsxs("div",{className:"pagination-buttons",children:[i>1&&e.jsxs("button",{onClick:()=>$(),style:{background:"#ef5350"},children:[e.jsx("span",{className:"button-text",children:"Previous page"}),e.jsx("i",{className:"fa-solid fa-arrow-left"})]}),e.jsxs("button",{onClick:()=>F(),style:{background:"#ef5350"},children:[e.jsx("span",{className:"button-text",children:"Next page"}),e.jsx("i",{className:"fa-solid fa-arrow-right"})]})]})]})})})};export{q as default};
